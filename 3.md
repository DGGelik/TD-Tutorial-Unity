```markdown
# План разработки: Crystal Bastion  
**Детальный план по шагам — Месяц 3**

**Цель месяца:** Добавить всех врагов, специальные эффекты башен, звуки и первую полировку.  
**Результат к концу месяца:** Полная игра с разнообразными врагами, рабочими эффектами (замедление, цепная молния) и звуковым сопровождением.  
**Время на месяц:** 8–12 занятий по 1,5–2 часа + домашние задания.  
**Предполагаем:** MVP Месяца 2 готов — 4 башни, 12 волн, UI работает.


## Неделя 9: Все типы врагов

### День 25: Префабы остальных врагов
**Что делаем:**
```
1. Дублировать EnemySlime → EnemySpider.prefab
   - SpriteRenderer → паук (Kenney)
   - EnemyStats_Spider: maxHealth = 150f, speed = 3.5f, goldReward = 12f
   
2. EnemyStoneTroll.prefab:
   - Тролль спрайт
   - maxHealth = 500f, speed = 1.2f, goldReward = 30f
   
3. EnemyWraith.prefab:
   - Призрак (летает)
   - maxHealth = 250f, speed = 2.8f, goldReward = 18f
```

**Результат:** 4 готовых префаба врагов.

### День 26: Логика полёта для Wraith
**Что делаем:**
```
1. EnemyWraith → Add Component → FlyingEnemy
   - Y позиция = 1.2f (над землёй)
   - Игнорирует наземные коллайдеры
   
2. TowerController.FindTarget():
   - if (enemy.IsFlying && !towerData.hitsFlying) → пропустить
   
3. ArcherTowerData: hitsFlying = false
   - FireTowerData: hitsFlying = true
```

**Результат:** Призраки летают и избегают некоторых башен.

### День 27: Босс — Fire Golem
**Что делаем:**
```
1. EnemyFireGolem.prefab:
   - Огромный спрайт (Scale: 1.8)
   - maxHealth = 2000f, speed = 1f, goldReward = 120f
   
2. Босс эффекты:
   - ParticleSystem: огонь вокруг
   - TrailRenderer: след огня
   - Экран тряска при появлении (Cinemachine Impulse)
```

**Результат:** Эпичный босс на 12-й волне.

**Контрольная точка недели 9:** Все 5 типов врагов спавнятся и работают ✅

---

## Неделя 10: Специальные эффекты башен

### День 28: Frost Tower — замедление
**Что делаем:**
```
1. TowerData_Frost: public float slowAmount = 0.5f, slowDuration = 3f
   
2. BulletController:
   - if (towerType == "Frost") {
     target.GetComponent<EnemyMovement>().ApplySlow(slowAmount, slowDuration)
   }
   
3. EnemyMovement:
   - public float currentSpeedMultiplier = 1f
   - ApplySlow(): уменьшить скорость на время
```

**Результат:** Ледяная башня замедляет врагов.

### День 29: Chain Lightning — цепной урон
**Что делаем:**
```
1. TowerData_Chain: public int maxTargets = 4, chainDamageMultiplier = 0.8f
   
2. ChainLightningController (новый тип пули):
   - Hit первого врага
   - Physics2D.OverlapCircle → найти ближайшего врага
   - Рекурсивно бить до maxTargets
   
3. Визуал: LineRenderer между целями
```

**Результат:** Молния бьёт по цепочке врагов.

### День 30: Эффекты попаданий и смерти
**Что делаем:**
```
1. ParticleSystem префабы:
   - HitEffect_Arrow, HitEffect_Fire, HitEffect_Frost, HitEffect_Lightning
   
2. EnemyHealth.TakeDamage():
   - Instantiate(hitEffect at hitPoint)
   
3. EnemyDeath:
   - Explosion particles + scale анимация
```

**Результат:** Красивые эффекты для всех башен.

**Контрольная точка недели 10:** Все специальные эффекты башен работают ✅

---

## Неделя 11: Звуковой дизайн

### День 31: Базовые звуки (AudioSource)
**Что делаем:**
```
1. Скачать звуки (Freesound.org / Kenney):
   - shoot_arrow.wav, shoot_fire.wav, explosion.wav
   - enemy_death.wav, tower_place.wav, upgrade.wav
   
2. GameObject → "AudioManager" → AudioSource для каждого типа
   
3. TowerController.Shoot(): AudioManager.Play("shoot_" + towerType)
```

**Результат:** Звуки для стрельбы и смерти.

### День 32: Фоновая музыка и UI звуки
**Что делаем:**
```
1. AudioSource → BackgroundMusic (Loop: true)
   - calm_theme.mp3 (ранние волны)
   - intense_theme.mp3 (волны 8+)
   
2. UI звуки:
   - Button clicks, gold spend, wave start
   
3. AudioMixer: Master, Music, SFX слайдеры
```

**Результат:** Полное звуковое сопровождение.

### День 33: Динамическая музыка по волнам
**Что делаем:**
```
1. WaveSpawner:
   - Волна <= 6 → Play(calmMusic)
   - Волна >= 7 → Crossfade(intenseMusic)
   
2. GameManager.LivesChanged():
   - lives < 10 → Add bass drop effect
```

**Результат:** Музыка меняется по напряжённости.

**Контрольная точка недели 11:** Полный звуковой дизайн ✅

---

## Неделя 12: Баланс и первая полировка

### День 34: Балансировка волн (ScriptableObject)
**Что делаем:**
```
1. Assets → Create → ScriptableObject → WaveConfig
   - public WaveData[] waves (12 волн)
   
2. WaveData:
   - EnemyType[] enemies
   - float spawnRate
   - int totalEnemies
   
3. Примеры:
   - Wave 1: 8 Slimes (1.2s)
   - Wave 12: 1 Golem + 6 Spiders + 4 Slimes (0.6s)
```

**Результат:** Каждая волна уникальна и сбалансирована.

### День 35: Статистика и экран победы
**Что делаем:**
```
1. GameManager:
   - public int totalEnemiesKilled, towersBuilt, goldEarned
   
2. VictoryPanel:
   - "Врагов уничтожено: 245"
   - "Башен построено: 18"
   - "Золото заработано: 1560"
   
3. Медаль: Gold/Silver/Bronze по % жизней
```

### День 36: Оптимизация и баги
**Что делаем:**
```
1. Object Pooling для пуль (50 штук)
2. Profiler: FPS > 60 при 20+ врагах
3. Фикс багов:
   - Продажа во время стрельбы
   - Звуки не останавливаются
   - UI не обновляется
```

**Результат:** Стабильная игра без лагов.

**Контрольная точка месяца 3:** ✅
```
- Все 5 врагов + босс
- Полные эффекты башен (замедление, цепь)
- Звуки и музыка
- Сбалансированные 12 волн
- Статистика победы
- FPS стабильно 60+
```

---

## Домашние задания месяца 3
```
1. Пройти уровень 10 раз подряд:
   - Записать волну, на которой проигрываете
   - Скриншот лучшей стратегии (победа)
   
2. Тестирование звуков:
   - Все ли звуки играют?
   - Музыка меняется?
   
3. Баланс:
   - Слишком легко/сложно на какой волне?
   - Какие башни бесполезны?
   
