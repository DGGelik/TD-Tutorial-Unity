### День 4 — Префаб первого врага (Slime)

**Цель дня:**  
Создать готовый шаблон (префаб) врага — зелёного слизня.  
Этот префаб будет основой для всех врагов в игре: завтра мы начнём спавнить их волнами, а позже добавим здоровье, анимацию и смерть.  
Сегодня мы делаем только базовую версию: внешний вид + коллайдер + физика.

**Результат дня:**  
В папке **Assets/Prefabs/Enemies** появится синий файл **Slime.prefab** — полноценный шаблон, который можно клонировать сколько угодно раз.

#### 1. Создаём пустой объект для врага

1. В окне **Hierarchy** (слева) щёлкните правой кнопкой мыши в пустом месте.  
2. Выберите **Create Empty**.  
3. Появится объект с именем **GameObject**.  
4. Кликните по имени дважды (или нажмите F2) и переименуйте в **Slime**.  
5. Нажмите Enter.

**Зачем пустой объект?**  
Это будет корневой объект врага. Все остальные компоненты (спрайт, коллайдер, физика, скрипты) добавляются именно к нему.  
Такая структура позволяет легко добавлять новые вещи (анимацию, звук, здоровье, эффекты) без путаницы.  
В реальных играх почти все персонажи/враги начинаются именно с пустого GameObject — это стандарт Unity.

#### 2. Добавляем Sprite Renderer — чтобы враг был виден

1. Выделите объект **Slime** в Hierarchy.  
2. В окне **Inspector** (справа) внизу нажмите **Add Component**.  
3. В поисковой строке введите **Sprite Renderer** → выберите его.  
4. В поле **Sprite** нажмите маленький кружок справа — откроется окно выбора спрайта.  
5. Перейдите в папку **Sprites** → найдите спрайт с именем **slime**, **slime_green** или похожим (из вашего спрайтшита).  
6. Кликните по нему два раза или перетащите в поле Sprite.  
7. (Опционально) В поле **Sorting Layer** оставьте **Default**, **Order in Layer** → 1 (чтобы враг был над дорогой, но под эффектами).

**Зачем нужен Sprite Renderer?**  
Это компонент, который отвечает за отображение 2D-картинки на экране.  
Без него враг будет полностью невидимым, даже если у него есть спрайт в проекте.

**Совет для новичков:**  
Если спрайт выглядит слишком большим или маленьким — откройте сам спрайт в Project → Inspector → **Pixels Per Unit** поставьте **128** (как у тайлов карты). Это сделает размер врага правильным относительно Tilemap.

#### 3. Добавляем Circle Collider 2D — для обнаружения и попаданий

1. Снова нажмите **Add Component**.  
2. В поиске введите **Circle Collider 2D** → добавьте.  
3. В Inspector найдите галочку **Is Trigger** и обязательно поставьте её (должна быть включена).  
4. В поле **Radius** установите значение **0.4** или **0.5** — подвигайте ползунок, чтобы зелёный круг примерно совпадал с размером спрайта слизня.

**Зачем Circle Collider 2D?**  
- Позволяет башням находить врага в радиусе атаки (через Physics2D.OverlapCircleAll).  
- Позволяет пулям/снарядам попадать по врагу (через OnTriggerEnter2D).  
**Is Trigger = true** — означает, что коллайдер не будет физически отталкивать объекты, а просто сообщать о касании. Это стандарт для всех врагов в Tower Defense.

**Почему круглый, а не квадратный?**  
Форма слизня круглая/овальная — круглый коллайдер точнее покрывает спрайт. Квадратный может торчать за края, что приведёт к ложным попаданиям.

#### 4. Добавляем Rigidbody 2D — обязательный компонент для триггеров

1. **Add Component** → в поиске **Rigidbody 2D**.  
2. В Inspector найдите поле **Body Type** и выберите **Kinematic**.  
3. **Gravity Scale** поставьте **0** (сотрите текущее число и напишите 0).  
4. (Опционально) В разделе **Constraints** поставьте галочку **Freeze Rotation Z** — чтобы враг не крутился при столкновениях.

**Зачем Rigidbody 2D, если мы будем двигать врага скриптом?**  
Unity требует Rigidbody на любом объекте с коллайдером, если вы хотите использовать триггер-события (OnTriggerEnter2D, OnTriggerStay2D).  
Без Rigidbody триггеры просто не сработают.  
**Kinematic** — означает: «Я сам управляю движением, не применяй ко мне физику».  
Gravity Scale = 0 — чтобы враг не падал вниз под гравитацией.

#### 5. Сохраняем объект как префаб

1. В Hierarchy найдите объект **Slime** (он должен быть выделен синим).  
2. Перетащите его мышкой в окно **Project** → в папку **Assets**.  
3. Если папки **Prefabs** нет — создайте её: правой кнопкой на Assets → **Create** → **Folder** → назовите **Prefabs**.  
4. Внутри Prefabs создайте подпапку **Enemies** (правой кнопкой → Create → Folder → Enemies).  
5. Перетащите Slime именно в **Assets/Prefabs/Enemies/Slime**.  
6. После перетаскивания объект в Hierarchy станет **синим** — это значит, он теперь префаб.

**Зачем делать префаб?**  
Префаб — это шаблон. Завтра в WaveSpawner мы будем создавать копии врагов командой **Instantiate(SlimePrefab)**.  
Если потом захотите изменить врага (цвет, размер, звук, скорость) — измените префаб один раз, и все копии в игре сразу обновятся автоматически.  
Без префаба пришлось бы настраивать каждого врага вручную — это часы работы.

**Важно:**  
После создания префаба все изменения в нём (в режиме редактирования префаба) применяются ко всем экземплярам.  
Если вы случайно изменили что-то на сцене — нажмите **Revert** в Inspector префаба, чтобы вернуть к оригиналу.

#### 6. Удаляем временный объект из сцены

1. В Hierarchy найдите объект **Slime** (он теперь синий).  
2. Щёлкните правой кнопкой → **Delete**.  
Или выделите его и нажмите клавишу **Delete** на клавиатуре.

**Зачем удалять?**  
Сцена должна быть чистой — мы не хотим лишних объектов, которые не участвуют в игре.  
Префаб уже сохранён в проекте — экземпляр в сцене нам пока не нужен (мы будем спавнить его скриптом).

#### 7. Полная проверка результата дня 4

1. В окне **Project** найдите папку **Assets/Prefabs/Enemies**  
2. Дважды кликните на **Slime.prefab** — откроется режим редактирования префаба:  
   - Виден спрайт слизня (в Scene окне)  
   - Зелёный круг коллайдера (если включён Gizmos)  
   - В Inspector: Sprite Renderer, Circle Collider 2D (Is Trigger = true), Rigidbody 2D (Kinematic, Gravity = 0)  
3. Перетащите **Slime.prefab** на сцену (в любое место) — враг появится.  
4. Нажмите **Play** — враг стоит на месте, не падает, коллайдер работает (можно проверить через Debug.DrawLine или временный скрипт).  
5. Остановите Play и удалите Slime со сцены (он нужен только как шаблон).

**Что нового появилось по сравнению с Днём 3?**  
- Готовый префаб врага Slime — основа для всех будущих врагов.  
- Теперь у нас есть: карта с дорогой (День 2), точки пути (День 3), первый враг в виде префаба.  
- Завтра мы добавим движение по waypoints — и враг поедет!

**На этом День 4 завершён.**  
У вас есть полноценный шаблон врага, который можно клонировать тысячи раз.  
Всё настроено правильно и готово к расширению (анимация, здоровье, эффекты смерти).  
Поздравляю — вы сделали первый живой элемент игры!