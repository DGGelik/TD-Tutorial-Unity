### День 2 — Tilemap + импорт спрайтшита + первая карта

**Цель дня**  
Создать полноценную игровую карту с травой (фоном) и извилистой дорогой с помощью Tilemap.  
Для этого мы:  
- Установим вспомогательный пакет (если его нет)  
- Найдём или создадим спрайтшит  
- Нарежем его на отдельные тайлы  
- Массово настроим все нарезанные спрайты (очень важно!)  
- Создадим два слоя Tilemap  
- Настроим палитры и нарисуем карту

#### 1. Установка пакета 2D Tilemap Extras (если не установлен)

1. В верхнем меню Unity нажмите **Window** → **Package Manager**.  
2. В открывшемся окне в левом верхнем углу выберите **Unity Registry** (выпадающий список).  
3. В строке поиска сверху напишите: `2D Tilemap Extras`.  
4. Найдите пакет **2D Tilemap Extras** (автор Unity Technologies).  
5. Если кнопка **Install** активна — нажмите её.  
6. Подождите 10–60 секунд (появится прогресс-бар).  

**Зачем нужен этот пакет?**  
Он добавляет продвинутые кисти, правила соединения тайлов (Rule Tile), автозаливку и другие инструменты для быстрого рисования карт.  
Без него базовый Tilemap работает, но рисовать будет медленнее и неудобнее.  

**В каких играх это используют?**  
Практически во всех 2D-играх на Unity с тайловыми картами: Hollow Knight (частично), Celeste (частично), Dead Cells, Stardew Valley-подобные проекты, большинство tower defense.

**Что будет, если пакет уже установлен?**  
Просто ничего не произойдёт — кнопка будет **Remove** или **Installed**. Это нормально.

#### 2. Где взять спрайтшит (4 варианта на выбор)

---

**Вариант 1 — Рекомендуемый для новичков (Kenney — бесплатно и быстро)**  
1. Открой браузер → перейди на https://kenney.nl/assets  
2. В поиск введи **tower defense**  
3. Выбери набор:  
   - **Tower Defense (Top-Down)** — самый популярный, ~300 тайлов  
   - **Tower Defense Kit**  
4. Нажми **Download** → скачается ZIP-файл  
5. Распакуй архив → найди большой файл **spritesheet.png** или **tilemap.png** (обычно 4096×4096 px)

**Зачем Kenney?**  
Лицензия CC0 — можно использовать даже в коммерческих играх.  
Тайлы уже в пиксель-арт стиле, размер 128×128, идеально подходят под Tilemap.  
Большинство туториалов по TD используют именно его.

---

**Вариант 2 — Сгенерировать уникальный стиль в нейросети**  
1. Зайди на Leonardo.AI, NightCafe, Ideogram.ai или Midjourney (бесплатные версии есть)  
2. Введи промпт: 
3. 
  > pixel art tower defense tileset sprite sheet, top-down 2D, 128x128 pixels per tile, clean grid, grass tiles, dirt road tiles, stone paths, bushes, rocks, flowers, hex and square variations, retro 16-bit style, transparent background, no text, perfect alignment --ar 8:5 --stylize 250 --v 6

1. Сгенерируйте 5–10 вариантов → выберите лучший → скачайте PNG  
2. Проверьте в любом редакторе (Paint/GIMP), что тайлы 128×128 + 1 px отступ

---

**Вариант 3 — Бесплатные альтернативы**  
- itch.io: https://itch.io/game-assets/free → поиск "tower defense tileset pixel art"  
- OpenGameArt.org: поиск "tower defense sprite sheet"  
Примеры: Free Tower Defense Tileset (Cainos), Tower Defense 300 Tiles

- dВот несколько дополнительных бесплатных альтернатив для спрайтшитов/тайлсетов в стиле Tower Defense (pixel art, top-down, 2D), которые можно использовать вместо Kenney или в дополнение к нему. Все они либо полностью бесплатные, либо имеют бесплатные версии/пакеты под CC0 / Public Domain / бесплатную коммерческую лицензию.

---
**Вариант 4 — Unity Asset Store**  
1. В Unity: **Window** → **Asset Store**  
2. Поиск: **free tower defense tileset**  
3. Скачайте любой бесплатный набор

---

### Дополнительные бесплатные альтернативы (2024–2026)

1. **OpenGameArt.org — Tower Defense Tileset by various authors**  
   - Прямая ссылка: https://opengameart.org/content/tower-defense-tileset  
   - Размер тайлов: чаще всего 64×64 или 128×128  
   - Что внутри: трава, дороги, башни, враги, декор  
   - Лицензия: CC0 / Public Domain (большинство)  
   - Зачем брать: огромный выбор, можно комбинировать разные наборы

2. **Itch.io — Free Tower Defense Asset Pack by Cainos**  
   - Ссылка: https://cainos.itch.io/free-tower-defense-asset-pack  
   - Размер: 32×32 или 64×64 (можно масштабировать)  
   - Что внутри: дороги, башни, враги, эффекты  
   - Лицензия: бесплатная для коммерческого использования  
   - Плюс: очень чистый стиль, легко адаптировать под свой проект

3. **Itch.io — Pixel Tower Defense by Szadi Art**  
   - Ссылка: https://szadiart.itch.io/pixel-tower-defense  
   - Размер тайлов: 32×32 (можно увеличить до 128)  
   - Что внутри: полный набор — трава, дороги, башни, враги, UI-элементы  
   - Лицензия: бесплатная + коммерческая версия за донат  
   - Зачем: один из самых полных бесплатных наборов для TD

4. **CraftPix.net — Free Tower Defense Pack**  
   - Ссылка: https://craftpix.net/freebies/free-tower-defense-pixel-art-sprite-pack/  
   - Размер: 64×64 / 128×128  
   - Что внутри: дороги, башни, враги, эффекты взрывов  
   - Лицензия: бесплатная для личных и коммерческих проектов (указано на сайте)  
   - Плюс: современный стиль, много анимаций

5. **Itch.io — Free Pixel Art Tower Defense Tileset by Elthen**  
   - Ссылка: https://elthen.itch.io/free-pixel-art-tower-defense-tileset  
   - Размер: 32×32 (масштабируется до 128)  
   - Что внутри: трава, песок, дороги, башни, враги  
   - Лицензия: CC0  
   - Зачем: очень чистый и минималистичный стиль

6. **OpenGameArt.org — Top-Down Tower Defense Tiles by Buch**  
   - Ссылка: https://opengameart.org/content/top-down-tower-defense-tiles  
   - Размер: 64×64  
   - Что внутри: дороги, трава, башни, декор  
   - Лицензия: CC-BY 3.0 (бесплатно с указанием автора)  
   - Плюс: классический ретро-стиль

7. **Itch.io — Free 16x16 Tower Defense Assets by 0x72**  
   - Ссылка: https://0x72.itch.io/free-16x16-tower-defense-assets  
   - Размер: 16×16 (можно масштабировать)  
   - Что внутри: дороги, башни, враги, эффекты  
   - Лицензия: бесплатная коммерческая  
   - Зачем: если хочешь низкополигональный/ретро-стиль

### Как выбрать из всех вариантов

| Критерий                | Рекомендация                              | Почему |
|-------------------------|-------------------------------------------|--------|
| Самый быстрый старт     | Kenney Tower Defense (Top-Down)           | Готовый, большой, 128×128, CC0 |
| Уникальный стиль        | Сгенерировать в Leonardo.AI / Ideogram    | Свой дизайн за 5 минут |
| Полный набор (башни+враги) | Szadi Art или Cainos на itch.io        | Всё в одном пакете |
| Минималистичный/ретро   | 0x72 или Elthen                           | Чисто и просто |
| Классический пиксель-арт| Buch или OpenGameArt Tower Defense        | Проверено временем |

**Совет новичкам:**  
Начни с **Kenney** — он самый удобный для обучения.  
Когда сделаешь первую карту и поймёшь, как всё работает — попробуй сгенерировать свой стиль в нейросети или взять набор с itch.io.  
Все эти ассеты бесплатны для личных проектов и большинства — для коммерческих тоже (проверь лицензию на странице).

---



#### 3. Создаём папку и импортируем спрайтшит

1. В Project правой кнопкой на **Assets** → **Create** → **Folder** → назовите **Sprites**  
2. Двойной клик — откройте папку Sprites  
3. Перетащите **один большой PNG-спрайтшит** из компьютера прямо в эту папку

**Зачем отдельная папка?**  
Проект быстро становится большим. Отдельные папки (Sprites, Prefabs, Scripts, Scenes) — стандарт организации в инди-студиях.  
Без них всё валяется в Assets — потом файлы не найти.

---

#### 4. Настраиваем импорт спрайтшита перед нарезкой

1. В Project кликните на спрайтшит один раз  
2. В Inspector измените:  
- Texture Type → **Sprite (2D and UI)**  
- Sprite Mode → **Multiple**  
- Pixels Per Unit → **128**  
- Filter Mode → **Point (no filter)**  
- Compression → **None**  
3. Нажмите **Apply**

**Зачем эти настройки на этапе спрайтшита?**  
Они применятся ко всем нарезанным тайлам автоматически (наследуются).  
- Sprite (2D and UI) — говорит Unity, что это 2D-спрайты для игры  
- Multiple — разрешает нарезку  
- PPU 128 — тайл 128×128 пикселей = ровно 1 клетка Tilemap  
- Point — чёткие пиксели (bilinear размоет края)  
- None — максимальное качество (сжатие добавит артефакты)

**Что будет без них?**  
- Без Multiple — нарезка не сработает  
- PPU = 100 (дефолт) — тайлы будут неправильного размера  
- Bilinear — размытие пикселей  
- Compression — шум/полосы на тайлах

---

#### 5. Нарезка спрайтшита на отдельные тайлы

1. В Inspector нажмите **Sprite Editor**  
2. Слева нажмите **Slice**  
3. Настройки:  
- Type → **Grid By Cell Size**  
- Pixel Size → **X: 129**   **Y: 129** (128 + 1 px padding)  
- Pivot → **Center** (0.5, 0.5)  
4. Нажмите **Slice**  
5. Проверьте: каждый тайл в отдельном синем квадрате?  
6. Нажмите **Apply** → закройте окно

**Зачем нарезка?**  
Один большой файл — неудобно. Нарезка превращает его в отдельные спрайты-кисти для Tile Palette.  
Без неё карта рисовалась бы вручную — часы вместо минут.

---

#### 6. Массово настраиваем все нарезанные спрайты (самый важный шаг)

1. В папке Sprites выделите все новые файлы (Ctrl + A)  
2. В Inspector измените:  
- Pixels Per Unit → **128**  
- Filter Mode → **Point (no filter)**  
- Compression → **None**  
3. Нажмите **Apply**

**Зачем это делать массово после нарезки?**  
Иногда при нарезке PPU, Filter или Compression могут сбиться (особенно если спрайтшит был импортирован с другими настройками).  
Массовое изменение гарантирует, что **все** тайлы одинаковые.  
Если хотя бы один тайл будет с PPU 100 — он будет другого размера, на карте появятся зазоры или перекрытия.

**Чем отличается настройка на спрайтшите и на отдельных спрайтах?**  
- На **спрайтшите** — это базовые настройки **до нарезки**. Они наследуются всеми тайлами (автоматически).  
- На **отдельных спрайтах** — это **фиксация после нарезки**. Если наследование сломалось (редко, но бывает), мы исправляем массово.  
В 95% случаев достаточно настроить только спрайтшит, но шаг 6 — страховка от ошибок.

**Почему именно 128 PPU?**  
Kenney и большинство TD-ассетов — 128×128 px на тайл.  
PPU = 128 → 1 тайл = ровно 1 клетка Tilemap (Cell Size 1×1).  
Если поставить 64 — тайлы будут в 2 раза больше, карта не влезет в экран.

**Что будет, если пропустить?**  
- Разные PPU — зазоры, смещения, тайлы не стыкуются  
- Bilinear — размытие пикселей  
- Compression — артефакты (точки, полосы), особенно заметно при зуме

---

#### 7. Создаём слои Tilemap (Ground и Path)

1. В Hierarchy правой кнопкой → **2D Object** → **Tilemap** → **Rectangular**  
2. Переименуйте дочерний Tilemap в **Ground**  
3. Снова правой кнопкой на **Grid** → **2D Object** → **Tilemap** → **Rectangular**  
4. Переименуйте в **Path**

**Зачем два слоя?**  
Ground — фон (трава, декор).  
Path — дорога (враги идут по ней).  
Так дорога всегда поверх травы, можно легко добавлять декор, тени, эффекты.

**В каких играх используют?**  
Bloons TD — слои для пути, декора, эффектов.  
Kingdom Rush — 3–5 слоёв.  
Stardew Valley — до 10 слоёв.

---

#### 8. Настраиваем Tile Palette и рисуем карту

1. Откройте **Window** → **2D** → **Tile Palette**  
2. Создайте палитру для фона: **Create New Palette…** → **GroundPalette** → Create  
3. Перетащите тайлы травы/земли в палитру (или массово — выделите и перетащите)  
4. Создайте **PathPalette** → перетащите дорожные тайлы

**Зачем Tile Palette?**  
Панель кистей: каждый тайл — инструмент для рисования.  
Без неё — перетаскивание тайлов вручную (очень медленно).  
В реальных играх (Ori, Dead Cells) палитры — основной инструмент для уровней.

**Быстрый способ — массовый импорт**  
Выделите все нужные тайлы → перетащите в палитру → Unity создаст Tile-ассеты автоматически.

**Рисование карты**  
1. Выберите GroundPalette → зажмите левую кнопку в Scene → залейте всю карту травой  
2. Переключитесь на PathPalette → нарисуйте дорогу (начало — левый нижний, конец — правый верхний, 12–18 поворотов)

---

# Результат дня 2
   >Готовая карта: 
   * тёмно-зелёный фон, 
   * трава, 
   * извилистая дорога.  
   * Всё ровно, без зазоров. 
   
   Готовы к waypoints и врагам!