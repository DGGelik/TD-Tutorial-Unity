```markdown
# План разработки: Crystal Bastion  
**Детальный план по шагам — Месяц 2**

**Цель месяца:** Полноценная игра с 4 типами башен, UI, экономикой и условиями победы/поражения.  
**Результат к концу месяца:** MVP — можно пройти 12 волн, строить/улучшать/продавать башни, проиграть или победить.  
**Время на месяц:** 8–12 занятий по 1,5–2 часа + домашние задания.  
**Предполагаем:** Месяц 1 завершён — враги ходят, 1 башня стреляет, волны спавнятся.


## Неделя 5: Все типы башен и улучшения

### День 13: Создание остальных башен (префабы)
**Что делаем:**
```
1. Дублировать ArcherTower → FireTower.prefab
   - SpriteRenderer → огненная башня (Kenney)
   - TowerController: damage = 50f, fireRate = 0.8f
   
2. Дублировать → FrostTower.prefab
   - Ледяная башня
   - damage = 25f, fireRate = 1f
   
3. Дублировать → ChainLightningTower.prefab
   - Электрическая башня
   - damage = 30f, fireRate = 1.1f
```

**Результат:** 4 готовых префаба башен.

### День 14: ScriptableObjects для баланса башен
**Что делаем:**
```
1. Assets → Create → ScriptableObject → TowerData
   - public string towerName
   - public float baseDamage, fireRate, range
   - public int baseCost, upgradeCosts[3]
   - public Sprite icon
   
2. Создать 4 файла:
   - ArcherTowerData.asset
   - FireTowerData.asset
   - FrostTowerData.asset
   - ChainLightningData.asset
   
3. TowerController: public TowerData data;
```

**Результат:** Все статы башен в одном месте — легко балансировать.

### День 15: Система улучшений башен
**Что делаем:**
```
1. TowerController → Add: int upgradeLevel = 1;
2. UpdateData(): применить data.upgradeCosts[upgradeLevel-1]
3. UI: World Space Canvas над башней → Upgrade Button
   
4. UpgradeTower():
   - if (золото >= стоимость) { upgradeLevel++; UpdateData(); }
```

**Результат:** Башни улучшаются до 3 уровня.

**Контрольная точка недели 5:** Все 4 башни работают + улучшаются ✅

---

## Неделя 6: Интерфейс размещения башен

### День 16: Build Manager и магазин башен
**Что делаем:**
```
1. GameManager → Add Component → BuildManager
   - public TowerData selectedTower
   - public GameObject towerPrefab
   
2. Canvas → ShopPanel (4 кнопки):
   - Button_Archer, Button_Fire, etc.
   - Клик → BuildManager.selectedTower = ArcherData
   
3. Preview: Ghost башня следует за мышью (полупрозрачная)
```

**Результат:** Выбираем башню в магазине, видим preview.

### День 17: Размещение башен Raycast2D
**Что делаем:**
```
1. BuildManager → PlaceTower():
   - Physics2D.Raycast от камеры к мыши
   - LayerMask: только "Buildable" (трава)
   - НЕ на "Road" layer
   
2. Instantiate(towerPrefab, hit.point, Quaternion.identity)
3. Минус золото из GameManager.gold
```

**Результат:** Клик по траве → башня ставится за золото.

### День 18: Система слоёв и визуальная обратная связь
**Что делаем:**
```
1. GroundTilemap → Layer: Buildable
2. RoadTilemap → Layer: Road (игнорировать)
3. BuildManager:
   - Красный preview = нельзя строить
   - Зелёный preview = можно
   
4. ParticleSystem: "BuildEffect" при размещении
```

**Результат:** Чёткие правила размещения + красивые эффекты.

**Контрольная точка недели 6:** Полное строительство башен работает ✅

---

## Неделя 7: HUD и полноценная экономика

### День 19: Основной HUD (Canvas)
**Что делаем:**
```
1. Canvas → Scaler: Scale With Screen Size (Reference: 1920x1080)
2. Создать элементы:
   - GoldText (верхний левый угол): "Gold: 350"
   - LivesText: "Lives: 20" 
   - WaveText: "Wave: 1/12"
   - NextWaveTimer: "Next wave: 10s"
```

**Результат:** Видно все важные цифры.

### День 20: Экономика в GameManager
**Что делаем:**
```
1. GameManager:
   - public int gold = 350, lives = 20, currentWave = 1
   - public void AddGold(int amount)
   - public bool SpendGold(int amount)
   
2. EnemyDeath → GameManager.Instance.AddGold(enemyStats.goldReward)
3. UI Update: каждые 0.1 сек обновлять тексты
```

**Результат:** Золото работает корректно.

### День 21: Урон по жизням (когда враг дошёл)
**Что делаем:**
```
1. EnemyMovement: достиг Waypoint15 → GameManager.TakeDamage()
2. GameManager.TakeDamage(): lives--; Update UI
3. if (lives <= 0) → GameOver()
```

**Результат:** Враг дошёл до конца = минус жизнь.

**Контрольная точка недели 7:** Полная экономика + жизни ✅

---

## Неделя 8: Условия победы/поражения + продажа

### День 22: Экраны Win/Lose
**Что делаем:**
```
1. Canvas → GameOverPanel (неактивен):
   - Text: "Монстры победили!"
   - Button: Restart
   
2. Canvas → VictoryPanel:
   - Text: "Кристалл спасён! Волны: 12/12"
   - Button: Next Level (пока Restart)
   
3. WaveSpawner: все волны завершены → ShowVictory()
```

### День 23: Продажа башен
**Что делаем:**
```
1. Каждая башня: World Space Canvas → Sell Button
2. SellTower(): возврат 65% от data.totalCost
3. ParticleSystem: "SellEffect" + Destroy башни
```

### День 24: Финальная балансировка волн
**Что делаем:**
```
1. WaveSpawner → WaveConfig (ScriptableObject):
   - Волна 1: 6 Slimes
   - Волна 4: 4 Slimes + 3 Spiders
   - Волна 12: 1 Boss + 8 Spiders
   
2. Тестировать: пройти весь уровень 3 раза
```

**Результат:** Можно пройти 12 волн или проиграть.

**Контрольная точка месяца 2 (MVP):** ✅
```
- 4 башни с улучшениями
- Полный магазин и размещение
- HUD + экономика
- 12 волн с разными врагами
- Win/Lose экраны
- Продажа башен
```

---

## Домашние задания месяца 2
```
1. Пройти уровень 5–7 раз, записать:
   - На какой волне проигрываете?
   - Какие башни самые полезные?
   - Где лучше всего строить?
   
2. Сделать 3 скриншота: начало, середина, победа
   
3. Попробовать "сломать" игру:
   - Построить 15 башен
   - Продать все башни на 8-й волне
   - Пропустить волны
   
